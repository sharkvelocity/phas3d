!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("babylonjs")):"function"==typeof define&&define.amd?define("babylonjs-procedural-textures",["babylonjs"],r):"object"==typeof exports?exports["babylonjs-procedural-textures"]=r(require("babylonjs")):e.PROCEDURALTEXTURES=r(e.BABYLON)}("undefined"!=typeof self?self:"undefined"!=typeof global?global:this,(e=>(()=>{"use strict";var r={597:r=>{r.exports=e}},o={};function t(e){var n=o[e];if(void 0!==n)return n.exports;var i=o[e]={exports:{}};return r[e](i,i.exports,t),i.exports}t.d=(e,r)=>{for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};t.d(n,{default:()=>h});var i={};t.r(i),t.d(i,{FireProceduralTexture:()=>f});var l={};t.r(l),t.d(l,{FireProceduralTexture:()=>f});var a=function(e,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(e,r)};function s(e,r,o,t){var n,i=arguments.length,l=i<3?r:null===t?t=Object.getOwnPropertyDescriptor(r,o):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,r,o,t);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(l=(i<3?n(l):i>3?n(r,o,l):n(r,o))||l);return i>3&&l&&Object.defineProperty(r,o,l),l}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var c=t(597),u="fireProceduralTexturePixelShader";c.ShaderStore.ShadersStore[u]||(c.ShaderStore.ShadersStore[u]="precision highp float;uniform float time;uniform vec3 c1;uniform vec3 c2;uniform vec3 c3;uniform vec3 c4;uniform vec3 c5;uniform vec3 c6;uniform vec2 speed;uniform float shift;uniform float alphaThreshold;varying vec2 vUV;float rand(vec2 n) {return fract(cos(dot(n,vec2(12.9898,4.1414)))*43758.5453);}\nfloat noise(vec2 n) {const vec2 d=vec2(0.0,1.0);vec2 b=floor(n),f=smoothstep(vec2(0.0),vec2(1.0),fract(n));return mix(mix(rand(b),rand(b+d.yx),f.x),mix(rand(b+d.xy),rand(b+d.yy),f.x),f.y);}\nfloat fbm(vec2 n) {float total=0.0,amplitude=1.0;for (int i=0; i<4; i++) {total+=noise(n)*amplitude;n+=n;amplitude*=0.5;}\nreturn total;}\nvoid main() {vec2 p=vUV*8.0;float q=fbm(p-time*0.1);vec2 r=vec2(fbm(p+q+time*speed.x-p.x-p.y),fbm(p+q-time*speed.y));vec3 c=mix(c1,c2,fbm(p+r))+mix(c3,c4,r.x)-mix(c5,c6,r.y);vec3 color=c*cos(shift*vUV.y);float luminance=dot(color.rgb,vec3(0.3,0.59,0.11));gl_FragColor=vec4(color,luminance*alphaThreshold+(1.0-alphaThreshold));}");var f=function(e){function r(o,t,n,i,l){void 0===n&&(n=null);var a=e.call(this,o,t,"fireProceduralTexture",n,i,l)||this;return a._time=0,a._speed=new c.Vector2(.5,.3),a._autoGenerateTime=!0,a._alphaThreshold=.5,a._fireColors=r.RedFireColors,a.updateShaderUniforms(),a}return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}a(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}(r,e),r.prototype.updateShaderUniforms=function(){this.setFloat("time",this._time),this.setVector2("speed",this._speed),this.setColor3("c1",this._fireColors[0]),this.setColor3("c2",this._fireColors[1]),this.setColor3("c3",this._fireColors[2]),this.setColor3("c4",this._fireColors[3]),this.setColor3("c5",this._fireColors[4]),this.setColor3("c6",this._fireColors[5]),this.setFloat("alphaThreshold",this._alphaThreshold)},r.prototype.render=function(r){var o=this.getScene();this._autoGenerateTime&&o&&(this._time+=.03*o.getAnimationRatio(),this.updateShaderUniforms()),e.prototype.render.call(this,r)},Object.defineProperty(r,"PurpleFireColors",{get:function(){return[new c.Color3(.5,0,1),new c.Color3(.9,0,1),new c.Color3(.2,0,1),new c.Color3(1,.9,1),new c.Color3(.1,.1,1),new c.Color3(.9,.9,1)]},enumerable:!1,configurable:!0}),Object.defineProperty(r,"GreenFireColors",{get:function(){return[new c.Color3(.5,1,0),new c.Color3(.5,1,0),new c.Color3(.3,.4,0),new c.Color3(.5,1,0),new c.Color3(.2,0,0),new c.Color3(.5,1,0)]},enumerable:!1,configurable:!0}),Object.defineProperty(r,"RedFireColors",{get:function(){return[new c.Color3(.5,0,.1),new c.Color3(.9,0,0),new c.Color3(.2,0,0),new c.Color3(1,.9,0),new c.Color3(.1,.1,.1),new c.Color3(.9,.9,.9)]},enumerable:!1,configurable:!0}),Object.defineProperty(r,"BlueFireColors",{get:function(){return[new c.Color3(.1,0,.5),new c.Color3(0,0,.5),new c.Color3(.1,0,.2),new c.Color3(0,0,1),new c.Color3(.1,.2,.3),new c.Color3(0,.2,.9)]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"autoGenerateTime",{get:function(){return this._autoGenerateTime},set:function(e){this._autoGenerateTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fireColors",{get:function(){return this._fireColors},set:function(e){this._fireColors=e,this.updateShaderUniforms()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"time",{get:function(){return this._time},set:function(e){this._time=e,this.updateShaderUniforms()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"speed",{get:function(){return this._speed},set:function(e){this._speed=e,this.updateShaderUniforms()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"alphaThreshold",{get:function(){return this._alphaThreshold},set:function(e){this._alphaThreshold=e,this.updateShaderUniforms()},enumerable:!1,configurable:!0}),r.prototype.serialize=function(){var r=c.SerializationHelper.Serialize(this,e.prototype.serialize.call(this));r.customType="BABYLON.FireProceduralTexture",r.fireColors=[];for(var o=0;o<this._fireColors.length;o++)r.fireColors.push(this._fireColors[o].asArray());return r},r.Parse=function(e,o,t){for(var n=c.SerializationHelper.Parse((function(){return new r(e.name,e._size,o,void 0,e._generateMipMaps)}),e,o,t),i=[],l=0;l<e.fireColors.length;l++)i.push(c.Color3.FromArray(e.fireColors[l]));return n.fireColors=i,n},s([(0,c.serialize)()],r.prototype,"autoGenerateTime",null),s([(0,c.serialize)()],r.prototype,"time",null),s([(0,c.serializeAsVector2)()],r.prototype,"speed",null),s([(0,c.serialize)()],r.prototype,"alphaThreshold",null),r}(c.ProceduralTexture);(0,c.RegisterClass)("BABYLON.FireProceduralTexture",f);var p=void 0!==t.g?t.g:"undefined"!=typeof window?window:void 0;if(void 0!==p)for(var d in i)p.BABYLON[d]=i[d];const h=l;return n.default})()));
//# sourceMappingURL=babylon.fireProceduralTexture.min.js.map